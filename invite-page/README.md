# Invite page (rich link preview – one card like Snapchat)

Shared invite links show as **one card**: image on top, title **"Join [challenge name]"**, then domain – same style as Snapchat.

## How it works

When someone shares an invite, the app sends:  
`https://bttrsite.vercel.app/join/<goal_list_id>`

iMessage (and other apps) fetch that URL and read the **Open Graph** meta tags. The response is generated by a **serverless function** that:

1. Looks up the challenge name from Supabase.
2. Returns HTML with `og:title` = **"Join [challenge name]"**, `og:image` = your app image, `og:url` = the link.

So the preview is one unified card: image + "Join [challenge name]" + bttrsite.vercel.app.

## Deploy on bttrsite.vercel.app

Use the **bttrsite** Vercel project (the one that deploys to https://bttrsite.vercel.app).

1. **Copy from this app repo into the bttrsite repo:**
   - **`api/`** folder → put at the **root** of the bttrsite repo (so you have `api/join/[id].js`).
   - **`vercel.json`** → merge or replace the one in bttrsite so it includes the rewrite below.
   - **`assets/fsf.png`** from this app → in bttrsite put it at the **static root** so it’s served as `https://bttrsite.vercel.app/fsf.png` (e.g. in `public/fsf.png` if using Next.js, or your static output root).

2. **`vercel.json`** in bttrsite must have:
   ```json
   {
     "rewrites": [
       { "source": "/join/:id", "destination": "/api/join/:id" }
     ]
   }
   ```
   If you already have other rewrites, add this `rewrites` entry to the existing array.

3. **Dependency:** In the bttrsite project, install Supabase (if not already):
   ```bash
   npm install @supabase/supabase-js
   ```

4. **Environment variables** in Vercel (Project → Settings → Environment Variables):
   - `SUPABASE_URL` = your Supabase project URL (same as in the app).
   - `SUPABASE_ANON_KEY` = your Supabase anon key (same as in the app).

After deploy, `https://bttrsite.vercel.app/join/<goal_list_id>` will return HTML with the challenge name in the title, so the shared link appears as one card with your image and **"Join [challenge name]"**.

The app is already configured to use `https://bttrsite.vercel.app` as the invite base, so no app change is needed.
